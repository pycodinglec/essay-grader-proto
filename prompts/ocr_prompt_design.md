# OCR 프롬프트 설계 이력

## v1 (초기, 2026-02-23)

단순 텍스트 추출 방식.

```
이 이미지에 포함된 모든 텍스트를 정확히 그대로 추출하세요.
텍스트만 출력하고 다른 설명은 하지 마세요.
```

- 출력: raw text (비구조)
- 학번/이름 식별: submission.py에서 regex로 후처리

### 문제점
- OCR 결과에서 regex로 학번/이름을 추출하는 것이 불안정
- 인쇄된 지시문과 손 글씨 에세이를 구분하지 못함
- 악필 시 무리한 추측 가능성

## v2 (현재, 2026-02-23)

구조화 JSON 응답 방식으로 변경. 변경 사유:
1. 이미지에 인쇄 지시문 + 손 글씨 에세이가 혼재할 수 있음을 모델에 알려야 함
2. 학번/이름을 OCR 단계에서 직접 추출하여 정확도 향상
3. 악필 시 무리한 추측 금지 지시 추가

```
이 이미지는 학생이 작성한 에세이 답안지입니다.

이미지에는 다음 중 하나의 형태가 나타납니다:
- 학생이 손 글씨로 작성한 에세이만 존재
- 인쇄된 지시문(에세이 작성을 지시하기 위한 것)과 학생이 손 글씨로 작성한 에세이가 함께 존재

다음 정보를 추출하세요:
1. 학번: 인쇄된 지시문 또는 손 글씨에서 5자리 숫자 형태의 학번을 찾으세요.
2. 이름: 인쇄된 지시문 또는 손 글씨에서 학생의 이름을 찾으세요.
3. 에세이텍스트: 학생이 손 글씨로 작성한 에세이 본문만 추출하세요. 인쇄된 지시문은 포함하지 마세요.

주의사항:
- 학생의 악필로 인해 글자가 명확하지 않은 경우, 무리하게 추측하지 말고 보이는 글자 그대로 읽으세요.
- 학번이나 이름을 찾을 수 없으면 빈 문자열로 반환하세요.

반드시 다음 JSON 형식으로만 응답하세요:
{"학번": "학번값", "이름": "이름값", "에세이텍스트": "에세이 본문"}
```

- 출력: JSON {"학번", "이름", "에세이텍스트"}
- 학번/이름 식별: OCR 모델이 직접 추출
- submission.py의 regex 로직 제거, merge_ocr_pages로 다중 페이지 병합
